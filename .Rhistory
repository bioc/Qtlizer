spltq <- unlist(strsplit(q, " "))
n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
q <- lapply(spltq, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725 "
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 1
spltq <- unlist(strsplit(q, " "))
n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
q <- lapply(spltq, get_qtls)
query = "rs4284742, rs2070901, ENSG00000122194, hg19:19:45412079, hg38:6:12903725 "
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 1
spltq <- unlist(strsplit(q, " "))
n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
q <- lapply(spltq, get_qtls)
query = "rs4284742, rs2070901, hg19:19:45412079, hg38:6:12903725 "
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 1
spltq <- unlist(strsplit(q, " "))
n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
q <- lapply(spltq, get_qtls)
query = "hg38:6:12903725 rs4284742"
query = "rs4284742, rs2070901, hg19:19:45412079, hg38:6:12903725 "
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
q <- lapply(spltq, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
q <- lapply(spltq, get_qtls)
matrix(query, nrow=1, ncol=2)
matrix(query,  ncol=2)
matrix(query,  ncol=2, , byrow=TRUE)
# create matrix with 4 elements
cells <- c(2,5,12,30)
colname <- c("Jan", "Feb")
rowname <- c("Apple", "Orange")
y <- matrix(cells, nrow=2, ncol=2, byrow=TRUE, dimnames=list(rowname, colname))
y
matrix(query,  ncol=2, , byrow=TRUE, dimnames=list(rowname, colname))
matrix(spltq,  ncol=2)
y <- matrix(spltq,  ncol=2)
q <- lapply(y, get_qtls)
q <- lapply(y[:,:], get_qtls)
q <- lapply(y, 1,  get_qtls)
q <- apply(y, 1,  get_qtls)
q <- apply(y, 2,  get_qtls)
test2 <- unlist(lapply(split(query, ceiling(seq_along(query)/10)), paste, collapse=", "))
test2
test2 <- unlist(lapply(split(query, ceiling(seq_along(query)/2)), paste, collapse=", "))
test2
test2 <- unlist(lapply(split(query, ceiling(seq_along(query)/2)), paste, collapse=" "))
test2 <- unlist(lapply(strsplit(query, ceiling(seq_along(query)/2)), paste, collapse=" "))
y,1
y[1]
y[1,:]
q <- apply(y, 1,  paste)
q <- apply(y[, cols], 1,  paste)
q <- apply(y[, ], 1,  paste)
# create matrix with 4 elements
cells <- y
colname <- "spalten"
rowname <- "zeilen"
y <- matrix(cells, nrow=2, ncol=2, byrow=TRUE, dimnames=list(rowname, colname))
y
# create matrix with 4 elements
cells <- y
colname <- c("spalte1", "spalte2"")
y <- matrix(cells, ncol=2, byrow=TRUE, colnames=colname)
y
;
y
+2
print(x)
apply(y,1,paste,collapse=" ")
query = "hg38:6:12903725 rs4284742"
query = "rs4284742, rs2070901, hg19:19:45412079, hg38:6:12903725 "
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
y <- matrix(spltq,  ncol=2)
y
apply(y,1,paste,collapse=" ")
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
library(Qtlizer)
query = "hg38:6:12903725 rs4284742"
query = "rs4284742, rs2070901, hg19:19:45412079, hg38:6:12903725 "
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
y <- matrix(spltq,  ncol=max_terms)
apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
max_terms = 3
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
y <- matrix(spltq,  ncol=max_terms)
apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "hg38:6:12903725 rs4284742"
query = "rs4284742, rs2070901, hg19:19:45412079, hg38:6:12903725 "
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 3
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
y <- matrix(spltq,  ncol=max_terms)
apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 1
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
y <- matrix(spltq,  ncol=max_terms)
apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 1
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
s <- matrix(spltq,  ncol=max_terms)
apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
s <- matrix(spltq,  ncol=max_terms)
apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
y <- matrix(spltq,  ncol=max_terms)
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 3
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
y <- matrix(spltq,  ncol=max_terms)
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 1
spltq <- unlist(strsplit(q, " "))
#n_queries <- ceiling(length(spltq)/max_terms)
print(spltq)
y <- matrix(spltq,  ncol=max_terms)
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
get_qtls("DEFA1,")
get_qtls("DEFA1")
?get_qtls()
get_qtls(c("rs4284742", "DEFA1"))
head(get_qtls(c("rs4284742", "DEFA1")))
build()
check()
head(get_qtls(c("rs4284742", "DEFA1")))
get_qtls("DEFA1")
build()
check()
get_qtls("DEFA1")
build()
check()
get_qtls("DEFA1")
build()
check()
get_qtls("DEFA1")
tail(get_qtls(c("rs4284742", "DEFA1")))
tail(get_qtls("rs4284742")
;
tail(get_qtls("rs4284742")
)
build()
build()
build()
build()
build()
build()
tail(get_qtls("rs4284742")
)
a <- tail(get_qtls(c("rs4284742", "DEFA1")))
build()
build()
check()
get_qtls("rs4284742")
get_qtls("rs4284742", 0.6)
get_qtls(c("rs4284742", "DEFA1"))
build()
check()
get_qtls(c("rs4284742", "DEFA1"))
a <- get_qtls(c("rs4284742", "DEFA1"))
build()
check()
a <- get_qtls(c("rs4284742", "DEFA1"), 0.2)
build()
check()
a <- get_qtls(c("rs4284742", "DEFA1"), 0.2)
#'Query Qtlizer
#'
#'@description Makes a query at Qtlizer and writes the results
#'into a specified (or default) file.
#'
#'@param query The qtlizer query.
#'@param outputFile (optional) The name of the output file.
#'@return Response goes directly into the output file.
#'@examples qtfun("rs4284742")
#'qtfun("rs4284742", "outputFile.txt")
#'@importFrom utils write.table
#'@export
qtfun <- function(query, outputFile=of_default){
#Note: in the current version of Qtlizer, queries including
#gene identifier and chromosomal positions
#of variants taker longer than if using rsids only
of_default <- "defaultFile.txt"
output_file <- outputFile
q <- query
corr <- 0.8 # optional
ld_method <- "r2" # optional
url <- paste('http://genehopper.de/rest/qtlizer?q=', gsub("\\s+", ",", q),
"&corr=", corr, "&ld_method=", ld_method, sep="")
response <- httr::POST(url)
result <- httr::content(response)
a <- unlist(strsplit(result , "\n"))
meta <- grep("^#", a, value = TRUE)
data <- grep("^[^#]", a, value = TRUE)
header <- unlist(strsplit(data[1], "\t"))
ncols <- length(header)
if(is.null(data[-1])){
data <- NA
} else {
data <- unlist(strsplit(data[-1], "\t"))
}
m <- matrix(data, ncol=ncols, byrow=TRUE)
d <- as.data.frame(m, stringsAsFactors=FALSE)
write.table(meta, file=output_file, quote = FALSE, append=FALSE,
row.names = FALSE, col.names = FALSE)
write.table(gsub(", ", "\t",toString(header)), file=output_file,
quote = FALSE,  append=TRUE,
row.names = FALSE, col.names = FALSE)
write.table(d, file=output_file, sep="\t", quote = FALSE,
append=TRUE, row.names = FALSE, col.names = FALSE)
}
get_qtls(c("rs4284742", "DEFA1"))
get_qtls("DEFA1")
a <- get_qtls("rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725")
build()
build()
check()
a <- get_qtls("rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725")
setwd('~/Schreibtisch/Arbeit')
BiocCheck(Qtlizer)
BiocCheck('Qtlizer'')
)
BiocCheck('Qtlizer')
BiocCheck('Qtlizer')
setwd('~/Schreibtisch/Arbeit/Qtlizer')
build()
check()
BiocCheck('Qtlizer')
BiocCheck('../Qtlizer')
build()
check()
BiocCheck('../Qtlizer')
q <- get_qtls(c("rs4284742", "DEFA1"))
q <- get_qtls("DEFA1")
get_qtls("rs4284742")
q <- get_qtls("rs4284742")
max_terms = 1
spltq <- unlist(strsplit(q, " "))
y <- matrix(rs4284742,  ncol=max_terms)
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "rs4284742, rs2070901, DEFA1, ENSG00000122194, hg19:19:45412079, hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
y <- matrix(spltq,  ncol=max_terms)
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
y
query = "hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
y <- matrix(spltq,  ncol=max_terms)
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
query = "hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
y <- matrix(spltq,  ncol=max(max_terms, len(spltq))
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
max(max_terms, len(spltq)
)
query = "hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
y <- matrix(spltq,  ncol=max(max_terms, length(spltq)))
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
max(max_terms, length(spltq))
query = "hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
y <- matrix(spltq,  ncol=min(max_terms, length(spltq)))
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
min(max_terms, length(spltq))
query = "hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
y <- matrix(spltq,  ncol=min(max_terms, length(spltq)))
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
y
s
build()
check()
query = "hg38:6:12903725"
len = length(query)
print(query)
if(len == 1){ #single string
q <- query
} else{
q <- paste(query, collapse = ' ') #make a single query
}
max_terms = 2
spltq <- unlist(strsplit(q, " "))
y <- matrix(spltq,  ncol=min(max_terms, length(spltq)))
s <- apply(y,1,paste,collapse=" ")
q <- lapply(s, get_qtls)
lapply(s, get_qtls)
attributes(q)
attributes(lapply(s, get_qtls))
get_qtls("rs4284742")
attributes(get_qtls("rs4284742"))
attributes(get_qtls("rs4284742")[1])
get_qtls("rs4284742")[1]
cat(comment(get_qtls("rs4284742")))
q[0]
lapply(q, `[[`, 1)
attributes(lapply(q, `[[`, 1))
build()
check()
res <- get_qtls("rs4284742")
type(res)
typeof(res)
res[[1]]
attributes(res[[1]])
attributes(get_qtls("rs4284742")[[1]])
attributes(get_qtls("rs4284742 DEFA1")[[1]])
attributes(get_qtls("rs4284742 DEFA1")[[2]])
attributes(get_qtls("rs4284742 DEFA1")[[0]])
attributes(get_qtls("rs4284742 DEFA1")[[1]])
